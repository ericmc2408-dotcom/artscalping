<script>
    // Dictionnaire de traductions pour tous les textes de l'animation
    const translations = {
        fr: {
            animatedLoop: "La méthode commence par l'analyse de données.",
            skipButton: "Aller à la page suivante",
            nextButton: "→",
            startMethodButton: "Démarrez la méthode",
            scene1: {
                title: "La méthode commence par l'analyse de données.",
            },
            scene2: {
                title: "Le calcul des indices de performance",
                subtitle: "Calculating the Performance Indices",
                index1Title: "Indice 1",
                index1Text1: "Attaque Équipe Domicile + Défense Équipe Extérieure",
                index1Text2: "(Home Team Attack + Away Team Defense)",
                index2Title: "Indice 2",
                index2Text1: "Attaque Équipe Extérieure + Défense Équipe Domicile",
                index2Text2: "(Away Team Attack + Home Team Defense)",
            },
            scene3: {
                title: "Sélection des paris les plus sûrs",
                subtitle: "Selecting the Safest Bets",
                mysteriousText1: "Ces taux de réussite sont le fruit d'une **équation secrète**, patiemment élaborée et testée sur des années de données, alliant indices de performance et séquences.",
                mysteriousText2: "(These success rates are the result of a secret equation, patiently developed and tested over years of data, combining performance indices and sequences.)",
                percentage: "Taux de réussite : 92 à 94%",
                betBoxU45: "Under 4.5",
                betBoxU25: "Under 2.5 1ère mi-temps<br>(Under 2.5 First Half)",
            },
            scene4: {
                title: "Les Règles de la Méthode Complète",
                subtitle: "Complete Method Rules",
                u45DetailsTitle: "Under 4.5",
                u45StopLoss: "Sortir du pari à la 86e minute 30 secondes.",
                u45Scalping: "Le taux de réussite augmente après chaque but.",
                u45Condition: "Ne pas parier sur le but suivant tant que votre pari n'est pas terminé.",
                u25DetailsTitle: "Under 2.5 1ère mi-temps",
                u25MainRule: "On joue après la 4ème minute.",
                u25NoPlay: "Si 2 buts sont marqués en 3 minutes, on ne joue pas.",
                u25StopLoss: "Sortir du pari à la 42e minute 30 secondes.",
                u25Scalping: "Le taux de réussite augmente après chaque but.",
                u25Condition: "Ne pas parier sur le but suivant tant que votre pari n'est pas terminé.",
                additionalTextMain: "En appliquant scrupuleusement ces règles, le taux de réussite passe de",
                additionalTextUpgrade: "92-94% à 96-97%.",
            },
            perfectGame: {
                u25Title: "Perfect Game Under 2.5 (1ère mi-temps)",
                u25Subtitle: "(Perfect Game Under 2.5 (First Half))",
                u45Title: "Perfect Game Under 4.5",
                u45Subtitle: "(Perfect Game Under 4.5)",
                eventU25: [
                    { time: 3.5, text: "Pas de but dans les 3 premières minutes.", type: 'info' },
                    { time: 4.5, text: "On prend une cote de <span class='highlight'>1.05</span> sur l'Under 2.5.", type: 'bet' },
                    { time: 10, text: "Vente à la 10e minute pour une cote de <span class='highlight'>1.02</span>.", type: 'sell' },
                    { time: 15, text: "But ! La cote passe à <span class='highlight'>1.25</span>.", type: 'goal', score: '1-0' },
                    { time: 15.5, text: "Vente à <span class='highlight'>1.1</span>.", type: 'sell' },
                    { time: 25, text: "But ! La cote passe à <span class='highlight'>1.8</span>.", type: 'goal', score: '2-0' },
                    { time: 25.5, text: "Vente à <span class='highlight'>1.2</span>.", type: 'sell' },
                    { time: 42.5, text: "Stop Loss : Vente forcée à la 42e minute 30 secondes.", type: 'stop-loss' },
                    { time: 45, text: "Fin de la 1ère mi-temps : Le pari est terminé avec succès. Le match est fini pour nous !", type: 'end' }
                ],
                eventU45: [
                    { time: 0, text: "On attend le début du match pour confirmer le Scalping", type: 'info' },
                    { time: 1.5, text: "On prend une cote de <span class='highlight'>1.05</span> sur l'Under 4.5.", type: 'bet' },
                    { time: 10, text: "Vente à la 10e minute pour une cote de <span class='highlight'>1.02</span>.", type: 'sell' },
                    { time: 14, text: "But ! La cote passe à <span class='highlight'>1.20</span>.", type: 'goal', score: '1-0' },
                    { time: 14.5, text: "Vente à <span class='highlight'>1.1</span>.", type: 'sell' },
                    { time: 26, text: "But ! La cote passe à <span class='highlight'>1.4</span>.", type: 'goal', score: '2-0' },
                    { time: 26.5, text: "Vente à <span class='highlight'>1.15</span>.", type: 'sell' },
                    { time: 45, text: "But ! La cote passe à <span class='highlight'>1.5</span>.", type: 'goal', score: '3-0' },
                    { time: 45.5, text: "Vente à <span class='highlight'>1.2</span>.", type: 'sell' },
                    { time: 65, text: "But ! La cote passe à <span class='highlight'>1.9</span>.", type: 'goal', score: '4-0' },
                    { time: 65.5, text: "Vente à <span class='highlight'>1.2</span>.", type: 'sell' },
                    { time: 87.5, text: "Stop Loss : Vente forcée à la 87e minute 30 secondes.", type: 'stop-loss' },
                    { time: 90, text: "Fin du match : Le pari est terminé avec succès. Le match est fini pour nous !", type: 'end' }
                ]
            },
            finalStats: {
                title: "Un dernier chiffre pour la route",
                subtitle: "One last figure for the road",
                stat1: "L'année dernière, le système a généré plus de <span class='highlight'>20000 matchs</span> à jouer !",
                stat1Subtitle: "(Last year, the system generated more than 20000 matches to bet on!)",
                stat2: "Avec une moyenne de 2 buts par match, cela représente jusqu'à <span class='highlight'>46000 paris possibles</span>.",
                stat2Subtitle: "(With an average of 2 goals per match, this represents up to 46000 possible bets.)",
                download: "Le fichier est téléchargeable sur le site.",
                downloadSubtitle: "(The file is downloadable from the site.)",
                caveat: "Attention, ces paris ne sont pas tous jouables sur tous les bookmakers.",
                caveatSubtitle: "(Note: These bets are not all playable on all bookmakers.)",
            },
            lastScene: {
                title: "L'analogie de la Ferrari",
                analogyText: "Nous vous offrons un **outil de haute performance**. Mais comme avec une Ferrari, la puissance ne suffit pas. Sans un pilote compétent, la meilleure voiture finit dans le décor.",
                analogySubtitle: "(We offer you a high-performance tool. But like a Ferrari, power isn't enough. Without a skilled driver, the best car will crash.)",
                pilotText: "La méthode ArtScalping est une Ferrari. **Patience, rigueur et intelligence** sont les compétences dont vous avez besoin pour la piloter et réaliser des profits substantiels.",
                pilotSubtitle: "(The ArtScalping method is a Ferrari. Patience, rigor, and intelligence are the skills you need to drive it and make substantial profits.)",
                masteryText: "La maîtrise de soi est la clé pour transformer cet outil en une véritable machine à gagner.",
                masterySubtitle: "(Self-control is the key to turning this tool into a real winning machine.)"
            }
        },
        en: {
            animatedLoop: "The method begins with data analysis.",
            skipButton: "Go to next page",
            nextButton: "→",
            startMethodButton: "Start the method",
            scene1: {
                title: "The method begins with data analysis.",
            },
            scene2: {
                title: "Calculating the Performance Indices",
                subtitle: "Calcul des indices de performance",
                index1Title: "Index 1",
                index1Text1: "Home Team Attack + Away Team Defense",
                index1Text2: "(Attaque Équipe Domicile + Défense Équipe Extérieure)",
                index2Title: "Index 2",
                index2Text1: "Away Team Attack + Home Team Defense",
                index2Text2: "(Attaque Équipe Extérieure + Défense Équipe Domicile)",
            },
            scene3: {
                title: "Selecting the Safest Bets",
                subtitle: "Sélection des paris les plus sûrs",
                mysteriousText1: "These success rates are the result of a **secret equation**, patiently developed and tested over years of data, combining performance indices and sequences.",
                mysteriousText2: "(Ces taux de réussite sont le fruit d'une équation secrète, patiemment élaborée et testée sur des années de données, alliant indices de performance et séquences.)",
                percentage: "Success Rate: 92 to 94%",
                betBoxU45: "Under 4.5",
                betBoxU25: "Under 2.5 First Half<br>(Under 2.5 1ère mi-temps)",
            },
            scene4: {
                title: "Complete Method Rules",
                subtitle: "Les Règles de la Méthode Complète",
                u45DetailsTitle: "Under 4.5",
                u45StopLoss: "Exit the bet at 86 minutes and 30 seconds.",
                u45Scalping: "The success rate increases after each goal.",
                u45Condition: "Do not bet on the next goal until your current bet is finished.",
                u25DetailsTitle: "Under 2.5 First Half",
                u25MainRule: "We play after the 4th minute.",
                u25NoPlay: "If 2 goals are scored in 3 minutes, we do not play.",
                u25StopLoss: "Exit the bet at 42 minutes and 30 seconds.",
                u25Scalping: "The success rate increases after each goal.",
                u25Condition: "Do not bet on the next goal until your current bet is finished.",
                additionalTextMain: "By scrupulously applying these rules, the success rate increases from",
                additionalTextUpgrade: "92-94% to 96-97%.",
            },
            perfectGame: {
                u25Title: "Perfect Game Under 2.5 (First Half)",
                u25Subtitle: "(Perfect Game Under 2.5 (1ère mi-temps))",
                u45Title: "Perfect Game Under 4.5",
                u45Subtitle: "(Perfect Game Under 4.5)",
                eventU25: [
                    { time: 3.5, text: "No goal in the first 3 minutes.", type: 'info' },
                    { time: 4.5, text: "We take odds of <span class='highlight'>1.05</span> on Under 2.5.", type: 'bet' },
                    { time: 10, text: "Sale at the 10th minute for odds of <span class='highlight'>1.02</span>.", type: 'sell' },
                    { time: 15, text: "Goal! The odds change to <span class='highlight'>1.25</span>.", type: 'goal', score: '1-0' },
                    { time: 15.5, text: "Sale at <span class='highlight'>1.1</span>.", type: 'sell' },
                    { time: 25, text: "Goal! The odds change to <span class='highlight'>1.8</span>.", type: 'goal', score: '2-0' },
                    { time: 25.5, text: "Sale at <span class='highlight'>1.2</span>.", type: 'sell' },
                    { time: 42.5, text: "Stop Loss: Forced sale at 42 minutes and 30 seconds.", type: 'stop-loss' },
                    { time: 45, text: "End of the 1st half: The bet is successfully finished. The match is over for us!", type: 'end' }
                ],
                eventU45: [
                    { time: 0, text: "We wait for the start of the match to confirm the Scalping", type: 'info' },
                    { time: 1.5, text: "We take odds of <span class='highlight'>1.05</span> on Under 4.5.", type: 'bet' },
                    { time: 10, text: "Sale at the 10th minute for odds of <span class='highlight'>1.02</span>.", type: 'sell' },
                    { time: 14, text: "Goal! The odds change to <span class='highlight'>1.20</span>.", type: 'goal', score: '1-0' },
                    { time: 14.5, text: "Sale at <span class='highlight'>1.1</span>.", type: 'sell' },
                    { time: 26, text: "Goal! The odds change to <span class='highlight'>1.4</span>.", type: 'goal', score: '2-0' },
                    { time: 26.5, text: "Sale at <span class='highlight'>1.15</span>.", type: 'sell' },
                    { time: 45, text: "Goal! The odds change to <span class='highlight'>1.5</span>.", type: 'goal', score: '3-0' },
                    { time: 45.5, text: "Sale at <span class='highlight'>1.2</span>.", type: 'sell' },
                    { time: 65, text: "Goal! The odds change to <span class='highlight'>1.9</span>.", type: 'goal', score: '4-0' },
                    { time: 65.5, text: "Sale at <span class='highlight'>1.2</span>.", type: 'sell' },
                    { time: 87.5, text: "Stop Loss: Forced sale at 87 minutes and 30 seconds.", type: 'stop-loss' },
                    { time: 90, text: "End of the match: The bet is successfully finished. The match is over for us!", type: 'end' }
                ]
            },
            finalStats: {
                title: "One last figure for the road",
                subtitle: "Un dernier chiffre pour la route",
                stat1: "Last year, the system generated more than <span class='highlight'>20000 matches</span> to bet on!",
                stat1Subtitle: "(L'année dernière, le système a généré plus de 20000 matchs à jouer !)",
                stat2: "With an average of 2 goals per match, this represents up to <span class='highlight'>46000 possible bets</span>.",
                stat2Subtitle: "(Avec une moyenne de 2 buts par match, cela représente jusqu'à 46000 paris possibles.)",
                download: "The file is downloadable from the site.",
                downloadSubtitle: "(Le fichier est téléchargeable sur le site.)",
                caveat: "Note: These bets are not all playable on all bookmakers.",
                caveatSubtitle: "(Attention, ces paris ne sont pas tous jouables sur tous les bookmakers.)",
            },
            lastScene: {
                title: "The Ferrari Analogy",
                analogyText: "We offer you a **high-performance tool**. But like a Ferrari, power isn't enough. Without a skilled driver, the best car will crash.",
                analogySubtitle: "(Nous vous offrons un outil de haute performance. Mais comme avec une Ferrari, la puissance ne suffit pas. Sans un pilote compétent, la meilleure voiture finit dans le décor.)",
                pilotText: "The ArtScalping method is a Ferrari. **Patience, rigor, and intelligence** are the skills you need to drive it and make substantial profits.",
                pilotSubtitle: "(La méthode ArtScalping est une Ferrari. Patience, rigueur et intelligence sont les compétences dont vous avez besoin pour la piloter et réaliser des profits substantiels.)",
                masteryText: "Self-control is the key to turning this tool into a real winning machine.",
                masterySubtitle: "(La maîtrise de soi est la clé pour transformer cet outil en une véritable machine à gagner.)"
            }
        }
    };

    // Variables de l'animation
    const scenes = document.querySelectorAll('.scene');
    const nextButton = document.getElementById('next-button');
    const skipButton = document.getElementById('skip-button');
    const startMethodButton = document.getElementById('start-method-button');
    const systemName = document.getElementById('system-name');
    const animatedTextLoop = document.getElementById('animated-text-loop');

    let currentSceneIndex = 0;
    let language = 'fr'; // Langue par défaut

    // Fonctions de l'animation
    function updateContent() {
        const lang = translations[language];

        // Mise à jour des textes
        document.getElementById('animated-text-loop').textContent = lang.animatedLoop;
        document.getElementById('skip-button').textContent = lang.skipButton;
        document.getElementById('next-button').textContent = lang.nextButton;

        // Scene 1
        document.getElementById('main-title').textContent = lang.scene1.title;

        // Scene 2
        document.getElementById('scene-2-title').textContent = lang.scene2.title;
        document.getElementById('scene-2-subtitle').textContent = lang.scene2.subtitle;
        document.getElementById('index-1-title').textContent = lang.scene2.index1Title;
        document.getElementById('index-1-text-1').textContent = lang.scene2.index1Text1;
        document.getElementById('index-1-text-2').textContent = lang.scene2.index1Text2;
        document.getElementById('index-2-title').textContent = lang.scene2.index2Title;
        document.getElementById('index-2-text-1').textContent = lang.scene2.index2Text1;
        document.getElementById('index-2-text-2').textContent = lang.scene2.index2Text2;

        // Scene 3
        document.getElementById('scene-3-title').textContent = lang.scene3.title;
        document.getElementById('scene-3-subtitle').textContent = lang.scene3.subtitle;
        document.getElementById('mysterious-text-1').innerHTML = lang.scene3.mysteriousText1;
        document.getElementById('mysterious-text-2').innerHTML = lang.scene3.mysteriousText2;
        document.querySelector('#scene-3 .percentage').textContent = lang.scene3.percentage;
        document.getElementById('bet-box-u4-5').textContent = lang.scene3.betBoxU45;
        document.getElementById('bet-box-u2-5').innerHTML = lang.scene3.betBoxU25;

        // Scene 4
        document.getElementById('scene-4-title').textContent = lang.scene4.title;
        document.getElementById('scene-4-subtitle').textContent = lang.scene4.subtitle;
        document.getElementById('u4-5-details-title').textContent = lang.scene4.u45DetailsTitle;
        document.getElementById('u4-5-stop-loss').textContent = lang.scene4.u45StopLoss;
        document.getElementById('u4-5-scalping').textContent = lang.scene4.u45Scalping;
        document.getElementById('u4-5-condition').textContent = lang.scene4.u45Condition;
        document.getElementById('u2-5-details-title').textContent = lang.scene4.u25DetailsTitle;
        document.getElementById('u2-5-main-rule').textContent = lang.scene4.u25MainRule;
        document.getElementById('u2-5-no-play').textContent = lang.scene4.u25NoPlay;
        document.getElementById('u2-5-stop-loss').textContent = lang.scene4.u25StopLoss;
        document.getElementById('u2-5-scalping').textContent = lang.scene4.u25Scalping;
        document.getElementById('u2-5-condition').textContent = lang.scene4.u25Condition;
        document.getElementById('additional-text-main').textContent = lang.scene4.additionalTextMain;
        document.getElementById('additional-text-upgrade').textContent = lang.scene4.additionalTextUpgrade;

        // Perfect Game Scenes (titres et sous-titres)
        document.getElementById('perfect-game-u2-5-title').textContent = lang.perfectGame.u25Title;
        document.getElementById('perfect-game-u2-5-subtitle').textContent = lang.perfectGame.u25Subtitle;
        document.getElementById('perfect-game-u4-5-title').textContent = lang.perfectGame.u45Title;
        document.getElementById('perfect-game-u4-5-subtitle').textContent = lang.perfectGame.u45Subtitle;

        // Final Stats Scene
        document.getElementById('final-stats-title').textContent = lang.finalStats.title;
        document.getElementById('final-stats-subtitle').textContent = lang.finalStats.subtitle;
        document.getElementById('stat-line-1').innerHTML = lang.finalStats.stat1;
        document.getElementById('stat-line-1-subtitle').textContent = lang.finalStats.stat1Subtitle;
        document.getElementById('stat-line-2').innerHTML = lang.finalStats.stat2;
        document.getElementById('stat-line-2-subtitle').textContent = lang.finalStats.stat2Subtitle;
        document.getElementById('download-line-main').textContent = lang.finalStats.download;
        document.getElementById('download-line-subtitle').textContent = lang.finalStats.downloadSubtitle;
        document.getElementById('caveat-line-main').textContent = lang.finalStats.caveat;
        document.getElementById('caveat-line-subtitle').textContent = lang.finalStats.caveatSubtitle;

        // Last Scene
        document.getElementById('analogy-title').textContent = lang.lastScene.title;
        document.getElementById('analogy-text-1').innerHTML = lang.lastScene.analogyText;
        document.getElementById('analogy-text-1-subtitle').textContent = lang.lastScene.analogySubtitle;
        document.getElementById('pilot-text-main').innerHTML = lang.lastScene.pilotText;
        document.getElementById('pilot-text-subtitle').textContent = lang.lastScene.pilotSubtitle;
        document.getElementById('mastery-text-main').textContent = lang.lastScene.masteryText;
        document.getElementById('mastery-text-subtitle').textContent = lang.lastScene.masterySubtitle;
        document.getElementById('start-method-button').textContent = lang.startMethodButton;
    }

    function showScene(index) {
        scenes.forEach((scene, i) => {
            scene.classList.remove('active');
        });
        scenes[index].classList.add('active');

        // Gérer la visibilité du bouton "next"
        if (index === scenes.length - 1) { // Dernière scène
            nextButton.style.display = 'none';
            startMethodButton.style.display = 'block';
        } else {
            nextButton.style.display = 'block';
            startMethodButton.style.display = 'none';
        }

        // Démarrer la simulation si c'est une scène de "perfect game"
        if (index === scenes.length - 3) {
            startPerfectGameSimulation('u4-5');
        } else if (index === scenes.length - 4) {
            startPerfectGameSimulation('u2-5');
        }
    }

    function nextScene() {
        currentSceneIndex++;
        if (currentSceneIndex >= scenes.length) {
            currentSceneIndex = scenes.length - 1;
            return;
        }
        showScene(currentSceneIndex);
    }

    let gameTimerInterval;

    function startPerfectGameSimulation(betType) {
        clearInterval(gameTimerInterval);
        const gameData = translations[language].perfectGame[`event${betType.toUpperCase()}`];
        const logElement = document.getElementById(`action-log-${betType}`);
        const scoreElement = document.getElementById(`score-${betType}`);
        const timerElement = document.getElementById(`timer-${betType}`);
        let time = 0;
        let currentEventIndex = 0;
        let currentScore = [0, 0];
        logElement.innerHTML = '';
        scoreElement.textContent = '0-0';
        timerElement.textContent = '00:00';

        const runSimulation = () => {
            if (currentEventIndex < gameData.length && time >= gameData[currentEventIndex].time) {
                const event = gameData[currentEventIndex];
                const logItem = document.createElement('div');
                logItem.innerHTML = `<span class="info">${Math.floor(event.time)} min :</span> ${event.text}`;
                logItem.className = 'log-item';
                if (event.type === 'goal') {
                    logItem.classList.add('goal');
                    scoreElement.textContent = event.score;
                }
                logElement.prepend(logItem);
                currentEventIndex++;
            }

            if (currentEventIndex >= gameData.length) {
                clearInterval(gameTimerInterval);
                nextButton.style.display = 'block';
                return;
            }

            time += 0.5;
            const minutes = Math.floor(time);
            const seconds = Math.floor((time - minutes) * 60);
            timerElement.textContent = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        };

        gameTimerInterval = setInterval(runSimulation, 50); // Simuler 30 secondes en 1.5s
    }

    // Écouteurs d'événements
    nextButton.addEventListener('click', nextScene);
    skipButton.addEventListener('click', () => showScene(scenes.length - 1));
    startMethodButton.addEventListener('click', () => {
        window.location.href = 'https://example.com';
    });

    // Initialisation
    updateContent();
    showScene(currentSceneIndex);
</script>
